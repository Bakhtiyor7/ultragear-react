{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Box,Stack}from\"@mui/material\";import CloudDownloadIcon from\"@mui/icons-material/CloudDownload\";import Button from\"@mui/material/Button\";import{verifiedMemberData}from\"../../apiServices/verify\";import assert from\"assert\";import{Definer}from\"../../../lib/Definer\";import{sweetErrorHandling,sweetTopSmallSuccessAlert}from\"../../../lib/sweetAlert\";import MemberApiService from\"../../apiServices/memberApiService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function MySettings(props){var _verifiedMemberData$m,_verifiedMemberData$m2;/** INITIALIZATIONS */var _useState=useState(verifiedMemberData===null||verifiedMemberData===void 0?void 0:verifiedMemberData.mb_image),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState({mb_nick:\"\",mb_phone:\"\",mb_address:\"\",mb_description:\"\",mb_image:\"\"}),_useState4=_slicedToArray(_useState3,2),memberUpdate=_useState4[0],setMemberUpdate=_useState4[1];/** HANDLERS */var changeMemberNickHandler=function changeMemberNickHandler(e){memberUpdate.mb_nick=e.target.value;setMemberUpdate(_objectSpread({},memberUpdate));};var changeMemberPhoneHandler=function changeMemberPhoneHandler(e){memberUpdate.mb_phone=e.target.value;setMemberUpdate(_objectSpread({},memberUpdate));};var changeMemberAddressHandler=function changeMemberAddressHandler(e){memberUpdate.mb_address=e.target.value;setMemberUpdate(_objectSpread({},memberUpdate));};var changeMembeDescriptionHandler=function changeMembeDescriptionHandler(e){memberUpdate.mb_description=e.target.value;setMemberUpdate(_objectSpread({},memberUpdate));};var handleImagePreviewer=function handleImagePreviewer(e){try{var _file=e.target.files[0];var fileType=_file[\"type\"],validTypes=[\"image/jpg\",\"image/jpeg\",\"image/png\",\"image/svg\",\"image/webp\",\"image/\"];assert.ok(validTypes.includes(fileType)&&_file,Definer.input_err2);memberUpdate.mb_image=_file;setMemberUpdate(_objectSpread({},memberUpdate));setFile(URL.createObjectURL(_file));}catch(err){console.log(\"ERROR ::: handleImagePreviewer \".concat(err));sweetErrorHandling(err).then();}};var handleSubmitButton=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var memberService,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;memberService=new MemberApiService();_context.next=4;return memberService.updateMemberData(memberUpdate);case 4:result=_context.sent;assert.ok(result,Definer.general_err1);_context.next=8;return sweetTopSmallSuccessAlert(\"Information modified successfully\",700,false);case 8:window.location.reload();_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"ERROR ::: handleSubmitButton \".concat(_context.t0));sweetErrorHandling(_context.t0).then();case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function handleSubmitButton(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Stack,{className:\"my_settings_page\",children:[/*#__PURE__*/_jsxs(Box,{className:\"member_media_frame\",children:[/*#__PURE__*/_jsx(\"img\",{src:file,className:\"mb_image\",style:{borderRadius:\"50%\"},width:\"100px\",height:\"100px\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media_change_box\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload a photo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You should only upload in JPG, JPEG, PNG, SVG, WEBP formats!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"up_del_box\",children:/*#__PURE__*/_jsxs(Button,{component:\"label\",style:{minWidth:\"0\"},onChange:handleImagePreviewer,children:[/*#__PURE__*/_jsx(CloudDownloadIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true})]})})]})]}),/*#__PURE__*/_jsx(Box,{className:\"input_frame\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"long_input\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"spec_label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"spec_input mb_nick\",type:\"text\",placeholder:verifiedMemberData===null||verifiedMemberData===void 0?void 0:verifiedMemberData.mb_nick,name:\"mb_nick\",onChange:changeMemberNickHandler})]})}),/*#__PURE__*/_jsxs(Box,{className:\"input_frame\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"short_input\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"spec_label\",children:\"Phone number\"}),/*#__PURE__*/_jsx(\"input\",{className:\"spec_input mb_phone\",type:\"text\",placeholder:verifiedMemberData===null||verifiedMemberData===void 0?void 0:verifiedMemberData.mb_phone,name:\"mb_phone\",onChange:changeMemberPhoneHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"short_input\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"spec_label\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{className:\"spec_input  mb_address\",type:\"text\",placeholder:(_verifiedMemberData$m=verifiedMemberData===null||verifiedMemberData===void 0?void 0:verifiedMemberData.mb_address)!==null&&_verifiedMemberData$m!==void 0?_verifiedMemberData$m:\"adress is not provided\",name:\"mb_address\",onChange:changeMemberAddressHandler})]})]}),/*#__PURE__*/_jsx(Box,{className:\"input_frame\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"long_input\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"spec_label\",children:\"Information\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"spec_textarea mb_description\",placeholder:(_verifiedMemberData$m2=verifiedMemberData===null||verifiedMemberData===void 0?void 0:verifiedMemberData.mb_description)!==null&&_verifiedMemberData$m2!==void 0?_verifiedMemberData$m2:\"doesn't exist\",name:\"mb_description\",onChange:changeMembeDescriptionHandler})]})}),/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"flex-end\",sx:{mt:\"25px\"},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmitButton,children:\"Save\"})})]});}","map":{"version":3,"names":["React","useState","Box","Stack","CloudDownloadIcon","Button","verifiedMemberData","assert","Definer","sweetErrorHandling","sweetTopSmallSuccessAlert","MemberApiService","MySettings","props","mb_image","file","setFile","mb_nick","mb_phone","mb_address","mb_description","memberUpdate","setMemberUpdate","changeMemberNickHandler","e","target","value","changeMemberPhoneHandler","changeMemberAddressHandler","changeMembeDescriptionHandler","handleImagePreviewer","files","fileType","validTypes","ok","includes","input_err2","URL","createObjectURL","err","console","log","then","handleSubmitButton","memberService","updateMemberData","result","general_err1","window","location","reload","borderRadius","minWidth","mt"],"sources":["/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/src/app/screens/MemberPage/mySettings.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Box, Container, Stack } from \"@mui/material\";\nimport CloudDownloadIcon from \"@mui/icons-material/CloudDownload\";\nimport Button from \"@mui/material/Button\";\nimport { verifiedMemberData } from \"../../apiServices/verify\";\nimport { MemberUpdateData } from \"../../../types/user\";\nimport assert from \"assert\";\nimport { Definer } from \"../../../lib/Definer\";\nimport {\n  sweetErrorHandling,\n  sweetTopSmallSuccessAlert,\n} from \"../../../lib/sweetAlert\";\nimport MemberApiService from \"../../apiServices/memberApiService\";\n\nexport function MySettings(props: any) {\n  /** INITIALIZATIONS */\n  const [file, setFile] = useState(verifiedMemberData?.mb_image);\n\n  const [memberUpdate, setMemberUpdate] = useState<MemberUpdateData>({\n    mb_nick: \"\",\n    mb_phone: \"\",\n    mb_address: \"\",\n    mb_description: \"\",\n    mb_image: \"\",\n  });\n  /** HANDLERS */\n  const changeMemberNickHandler = (e: any) => {\n    memberUpdate.mb_nick = e.target.value;\n    setMemberUpdate({ ...memberUpdate });\n  };\n  const changeMemberPhoneHandler = (e: any) => {\n    memberUpdate.mb_phone = e.target.value;\n    setMemberUpdate({ ...memberUpdate });\n  };\n  const changeMemberAddressHandler = (e: any) => {\n    memberUpdate.mb_address = e.target.value;\n    setMemberUpdate({ ...memberUpdate });\n  };\n  const changeMembeDescriptionHandler = (e: any) => {\n    memberUpdate.mb_description = e.target.value;\n    setMemberUpdate({ ...memberUpdate });\n  };\n\n  const handleImagePreviewer = (e: any) => {\n    try {\n      const file = e.target.files[0];\n\n      const fileType = file[\"type\"],\n        validTypes = [\n          \"image/jpg\",\n          \"image/jpeg\",\n          \"image/png\",\n          \"image/svg\",\n          \"image/webp\",\n          \"image/\",\n        ];\n      assert.ok(validTypes.includes(fileType) && file, Definer.input_err2);\n\n      memberUpdate.mb_image = file;\n      setMemberUpdate({ ...memberUpdate });\n      setFile(URL.createObjectURL(file));\n    } catch (err) {\n      console.log(`ERROR ::: handleImagePreviewer ${err}`);\n      sweetErrorHandling(err).then();\n    }\n  };\n\n  const handleSubmitButton = async () => {\n    try {\n      const memberService = new MemberApiService();\n      const result = await memberService.updateMemberData(memberUpdate);\n\n      assert.ok(result, Definer.general_err1);\n      await sweetTopSmallSuccessAlert(\n        `Information modified successfully`,\n        700,\n        false\n      );\n      window.location.reload();\n    } catch (err) {\n      console.log(`ERROR ::: handleSubmitButton ${err}`);\n      sweetErrorHandling(err).then();\n    }\n  };\n  return (\n    <Stack className={\"my_settings_page\"}>\n      <Box className={\"member_media_frame\"}>\n        <img\n          src={file}\n          className={\"mb_image\"}\n          style={{ borderRadius: \"50%\" }}\n          width={\"100px\"}\n          height={\"100px\"}\n        />\n        <div className={\"media_change_box\"}>\n          <span>Upload a photo</span>\n          <p>You should only upload in JPG, JPEG, PNG, SVG, WEBP formats!</p>\n          <div className={\"up_del_box\"}>\n            <Button\n              component=\"label\"\n              style={{ minWidth: \"0\" }}\n              onChange={handleImagePreviewer}\n            >\n              <CloudDownloadIcon />\n              <input type=\"file\" hidden />\n            </Button>\n          </div>\n        </div>\n      </Box>\n      <Box className={\"input_frame\"}>\n        <div className={\"long_input\"}>\n          <label className={\"spec_label\"}>Name</label>\n          <input\n            className={\"spec_input mb_nick\"}\n            type=\"text\"\n            placeholder={verifiedMemberData?.mb_nick}\n            name=\"mb_nick\"\n            onChange={changeMemberNickHandler}\n          />\n        </div>\n      </Box>\n      <Box className={\"input_frame\"}>\n        <div className={\"short_input\"}>\n          <label className={\"spec_label\"}>Phone number</label>\n          <input\n            className={\"spec_input mb_phone\"}\n            type=\"text\"\n            placeholder={verifiedMemberData?.mb_phone}\n            name=\"mb_phone\"\n            onChange={changeMemberPhoneHandler}\n          />\n        </div>\n        <div className={\"short_input\"}>\n          <label className={\"spec_label\"}>Address</label>\n          <input\n            className={\"spec_input  mb_address\"}\n            type=\"text\"\n            placeholder={\n              verifiedMemberData?.mb_address ?? \"adress is not provided\"\n            }\n            name=\"mb_address\"\n            onChange={changeMemberAddressHandler}\n          />\n        </div>\n      </Box>\n      <Box className={\"input_frame\"}>\n        <div className={\"long_input\"}>\n          <label className={\"spec_label\"}>Information</label>\n          <textarea\n            className={\"spec_textarea mb_description\"}\n            placeholder={verifiedMemberData?.mb_description ?? \"doesn't exist\"}\n            name=\"mb_description\"\n            onChange={changeMembeDescriptionHandler}\n          />\n        </div>\n      </Box>\n      <Box display={\"flex\"} justifyContent={\"flex-end\"} sx={{ mt: \"25px\" }}>\n        <Button variant={\"contained\"} onClick={handleSubmitButton}>\n          Save\n        </Button>\n      </Box>\n    </Stack>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}