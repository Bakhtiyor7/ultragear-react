{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useRef,useState}from\"react\";import{Editor}from\"@toast-ui/react-editor\";import\"@toast-ui/editor/dist/toastui-editor.css\";import{Box,Button,FormControl,MenuItem,Select,Stack,TextField,Typography}from\"@mui/material\";import CommunityApiService from\"../../apiServices/communityApiService\";import{serverApi}from\"../../../lib/config\";import{sweetErrorHandling,sweetTopSmallSuccessAlert}from\"../../../lib/sweetAlert\";import assert from\"assert\";import{Definer}from\"../../../lib/Definer\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var TuiEditor=function TuiEditor(props){/** INITIALIZATIONS */var editorRef=useRef();var _useState=useState({art_subject:\"\",bo_id:\"\",art_content:\"\",art_image:\"\"}),_useState2=_slicedToArray(_useState,2),communityArticleData=_useState2[0],setCommunityArticleData=_useState2[1];/** HANDLERS */var history=useHistory();var uploadImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(image){var communityService,image_name,source;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;communityService=new CommunityApiService();_context.next=4;return communityService.uploadImageToServer(image);case 4:image_name=_context.sent;communityArticleData.art_image=image_name;setCommunityArticleData(_objectSpread({},communityArticleData));source=\"\".concat(serverApi,\"/\").concat(image_name);return _context.abrupt(\"return\",source);case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"ERROR ::: uplaodImage \".concat(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function uploadImage(_x){return _ref.apply(this,arguments);};}();var changeCategoryHandler=function changeCategoryHandler(e){communityArticleData.bo_id=e.target.value;setCommunityArticleData(_objectSpread({},communityArticleData));};var changeTitleHandler=useCallback(function(e){communityArticleData.art_subject=e.target.value;setCommunityArticleData(_objectSpread({},communityArticleData));},[communityArticleData.art_subject]);var handleRegisterButton=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var editor,art_content,communityService;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;editor=editorRef.current;art_content=editor===null||editor===void 0?void 0:editor.getInstance().getHTML();communityArticleData.art_content=art_content;assert.ok(communityArticleData.art_content!==\"\"&&communityArticleData.bo_id!==\"\"&&communityArticleData.art_subject!==\"\",Definer.input_err1);communityService=new CommunityApiService();_context2.next=8;return communityService.createArticle(communityArticleData);case 8:_context2.next=10;return sweetTopSmallSuccessAlert(\"Article created successfully!\");case 10:props.setArticleRebuild(new Date());props.setValue(\"1\");_context2.next=18;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);console.log(\"ERROR ::: handleRegisterButton \".concat(_context2.t0));sweetErrorHandling(_context2.t0).then();case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[0,14]]);}));return function handleRegisterButton(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Stack,{children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",style:{margin:\"40px\"},justifyContent:\"space-evenly\",children:[/*#__PURE__*/_jsxs(Box,{className:\"form_row\",style:{width:\"300px\"},children:[/*#__PURE__*/_jsx(Typography,{style:{color:\"gray\",margin:\"10px\"},variant:\"h3\",children:\"Category\"}),/*#__PURE__*/_jsx(FormControl,{sx:{width:\"100%\",background:\"white\"},children:/*#__PURE__*/_jsxs(Select,{value:communityArticleData.bo_id,displayEmpty:true,inputProps:{\"aria-label\":\"Without label\"},onChange:changeCategoryHandler,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Choose a category\"})}),/*#__PURE__*/_jsx(MenuItem,{value:\"celebrity\",children:\"celebrity\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"evaluation\",children:\"Review about brand products\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"story\",children:\"Story\"})]})})]}),/*#__PURE__*/_jsxs(Box,{className:\"form_row\",style:{width:\"300px\"},children:[/*#__PURE__*/_jsx(Typography,{style:{color:\"gray\",margin:\"10px\"},variant:\"h3\",children:\"Theme\"}),/*#__PURE__*/_jsx(TextField,{id:\"filled-basic\",label:\"Theme\",variant:\"filled\",style:{width:\"300px\",background:\"white\"},onChange:changeTitleHandler})]})]}),/*#__PURE__*/_jsx(Editor/*@ts-ignore*/,{ref:editorRef,initialValue:\"Type here\",placeholder:\"Type here\",previewStyle:\"vertical\",height:\"640px\",initialEditType:\"wysiwyg\",toolbarItems:[[\"heading\",\"bold\",\"italic\",\"strike\"],[\"image\",\"table\",\"link\"],[\"ul\",\"ol\",\"task\"]],hooks:{addImageBlobHook:function(){var _addImageBlobHook=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(image,callback){var uploadImageURL;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return uploadImage(image);case 2:uploadImageURL=_context3.sent;console.log(\"uplaodImageURL:\",uploadImageURL);callback(uploadImageURL);return _context3.abrupt(\"return\",false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));function addImageBlobHook(_x2,_x3){return _addImageBlobHook.apply(this,arguments);}return addImageBlobHook;}()},events:{load:function param(any){}}}),/*#__PURE__*/_jsx(Stack,{flexDirection:\"row\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",style:{margin:\"30px\",width:\"250px\",height:\"45px\"},onClick:handleRegisterButton,children:\"SUBMIT\"})})]});};","map":{"version":3,"names":["useCallback","useRef","useState","Editor","Box","Button","FormControl","MenuItem","Select","Stack","TextField","Typography","CommunityApiService","serverApi","sweetErrorHandling","sweetTopSmallSuccessAlert","assert","Definer","useHistory","TuiEditor","props","editorRef","art_subject","bo_id","art_content","art_image","communityArticleData","setCommunityArticleData","history","uploadImage","image","communityService","uploadImageToServer","image_name","source","console","log","changeCategoryHandler","e","target","value","changeTitleHandler","handleRegisterButton","editor","current","getInstance","getHTML","ok","input_err1","createArticle","setArticleRebuild","Date","setValue","then","margin","width","color","background","addImageBlobHook","callback","uploadImageURL","load","param","any","height"],"sources":["/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/src/app/components/tuiEditor/TuiEditor.tsx"],"sourcesContent":["import { useCallback, useRef, useState } from \"react\";\nimport { Editor } from \"@toast-ui/react-editor\";\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\n\nimport {\n  Box,\n  Button,\n  FormControl,\n  MenuItem,\n  Select,\n  Stack,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport CommunityApiService from \"../../apiServices/communityApiService\";\nimport { BoArticleInput } from \"../../../types/boArticle\";\nimport { serverApi } from \"../../../lib/config\";\nimport {\n  sweetErrorHandling,\n  sweetTopSmallSuccessAlert,\n} from \"../../../lib/sweetAlert\";\nimport assert from \"assert\";\nimport { Definer } from \"../../../lib/Definer\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const TuiEditor = (props: any) => {\n  /** INITIALIZATIONS */\n  const editorRef = useRef();\n  const [communityArticleData, setCommunityArticleData] =\n    useState<BoArticleInput>({\n      art_subject: \"\",\n      bo_id: \"\",\n      art_content: \"\",\n      art_image: \"\",\n    });\n\n  /** HANDLERS */\n  const history = useHistory();\n  const uploadImage = async (image: any) => {\n    try {\n      const communityService = new CommunityApiService();\n      const image_name = await communityService.uploadImageToServer(image);\n\n      communityArticleData.art_image = image_name;\n      setCommunityArticleData({ ...communityArticleData });\n\n      const source = `${serverApi}/${image_name}`;\n      return source;\n    } catch (err) {\n      console.log(`ERROR ::: uplaodImage ${err}`);\n    }\n  };\n\n  const changeCategoryHandler = (e: any) => {\n    communityArticleData.bo_id = e.target.value;\n    setCommunityArticleData({ ...communityArticleData });\n  };\n\n  const changeTitleHandler = useCallback(\n    (e: any) => {\n      communityArticleData.art_subject = e.target.value;\n      setCommunityArticleData({ ...communityArticleData });\n    },\n    [communityArticleData.art_subject]\n  );\n\n  const handleRegisterButton = async () => {\n    try {\n      const editor: any = editorRef.current;\n      const art_content = editor?.getInstance().getHTML();\n\n      communityArticleData.art_content = art_content;\n\n      assert.ok(\n        communityArticleData.art_content !== \"\" &&\n          communityArticleData.bo_id !== \"\" &&\n          communityArticleData.art_subject !== \"\",\n        Definer.input_err1\n      );\n\n      const communityService = new CommunityApiService();\n      await communityService.createArticle(communityArticleData);\n      await sweetTopSmallSuccessAlert(\"Article created successfully!\");\n      props.setArticleRebuild(new Date());\n      props.setValue(\"1\");\n    } catch (err) {\n      console.log(`ERROR ::: handleRegisterButton ${err}`);\n      sweetErrorHandling(err).then();\n    }\n  };\n\n  return (\n    <Stack>\n      <Stack\n        direction={\"row\"}\n        style={{ margin: \"40px\" }}\n        justifyContent={\"space-evenly\"}\n      >\n        <Box className={\"form_row\"} style={{ width: \"300px\" }}>\n          <Typography style={{ color: \"gray\", margin: \"10px\" }} variant=\"h3\">\n            Category\n          </Typography>\n          <FormControl sx={{ width: \"100%\", background: \"white\" }}>\n            <Select\n              value={communityArticleData.bo_id}\n              displayEmpty\n              inputProps={{ \"aria-label\": \"Without label\" }}\n              onChange={changeCategoryHandler}\n            >\n              <MenuItem value={\"\"}>\n                <span>Choose a category</span>\n              </MenuItem>\n              <MenuItem value={\"celebrity\"}>celebrity</MenuItem>\n              <MenuItem value={\"evaluation\"}>\n                Review about brand products\n              </MenuItem>\n              <MenuItem value={\"story\"}>Story</MenuItem>\n            </Select>\n          </FormControl>\n        </Box>\n        <Box className={\"form_row\"} style={{ width: \"300px\" }}>\n          <Typography style={{ color: \"gray\", margin: \"10px\" }} variant=\"h3\">\n            Theme\n          </Typography>\n          <TextField\n            id=\"filled-basic\"\n            label=\"Theme\"\n            variant=\"filled\"\n            style={{ width: \"300px\", background: \"white\" }}\n            onChange={changeTitleHandler}\n          />\n        </Box>\n      </Stack>\n\n      <Editor\n        /*@ts-ignore*/\n        ref={editorRef}\n        initialValue=\"Type here\"\n        placeholder=\"Type here\"\n        previewStyle=\"vertical\"\n        height=\"640px\"\n        initialEditType=\"wysiwyg\"\n        toolbarItems={[\n          [\"heading\", \"bold\", \"italic\", \"strike\"],\n          [\"image\", \"table\", \"link\"],\n          [\"ul\", \"ol\", \"task\"],\n        ]}\n        hooks={{\n          addImageBlobHook: async (image: any, callback: any) => {\n            const uploadImageURL = await uploadImage(image);\n            console.log(\"uplaodImageURL:\", uploadImageURL);\n            callback(uploadImageURL);\n            return false;\n          },\n        }}\n        events={{\n          load: function param(any) {},\n        }}\n      />\n      <Stack flexDirection={\"row\"} justifyContent=\"center\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          style={{ margin: \"30px\", width: \"250px\", height: \"45px\" }}\n          onClick={handleRegisterButton}\n        >\n          SUBMIT\n        </Button>\n      </Stack>\n    </Stack>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}