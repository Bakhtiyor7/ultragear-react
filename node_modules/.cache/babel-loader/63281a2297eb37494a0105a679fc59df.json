{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import TabPanel from\"@material-ui/lab/TabPanel\";import{Box,Button,Stack}from\"@mui/material\";//REDUX\nimport{useSelector}from\"react-redux\";import{createSelector}from\"reselect\";import{retrieveProcessOrders}from\"../../screens/OrdersPage/selector\";import{serverApi}from\"../../../lib/config\";import moment from\"moment\";import{sweetErrorHandling,sweetFailureProvider}from\"../../../lib/sweetAlert\";import OrderApiService from\"../../apiServices/orderApiService\";import{verifiedMemberData}from\"../../apiServices/verify\";/** REDUX SELECTOR */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var processOrdersRetriever=createSelector(retrieveProcessOrders,function(processOrders){return{processOrders:processOrders};});var dt=new Date();export default function ProcessOrders(props){// INITIALIZATIONS\nvar _useSelector=useSelector(processOrdersRetriever),processOrders=_useSelector.processOrders;//  HANDLERS\nvar finishOrderHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var order_id,data,confirmation,orderService;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;order_id=event.target.value;data={order_id:order_id,order_status:\"FINISHED\"};if(!verifiedMemberData){sweetFailureProvider(\"Please Login first!\",true);}confirmation=window.confirm(\"Buyurtmani olganingizni tasdiqlaysizmi?\");if(!confirmation){_context.next=10;break;}orderService=new OrderApiService();_context.next=9;return orderService.updateOrderStatus(data);case 9:props.setOrderRebuild(new Date());case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(\"deleteOrderHandler, ERROR\",_context.t0);sweetErrorHandling(_context.t0).then();case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function finishOrderHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(TabPanel,{value:\"2\",children:/*#__PURE__*/_jsx(Stack,{children:processOrders===null||processOrders===void 0?void 0:processOrders.map(function(order){return/*#__PURE__*/_jsxs(Box,{className:\"order_main_box\",children:[/*#__PURE__*/_jsx(Box,{className:\"order_box_scroll\",children:order.order_items.map(function(item){var product=order.product_data.filter(function(ele){return ele._id===item.product_id;})[0];var image_path=\"\".concat(serverApi,\"/\").concat(product.product_images[0]);return/*#__PURE__*/_jsxs(Box,{className:\"ordersName_price\",children:[/*#__PURE__*/_jsx(\"img\",{src:image_path,className:\"orderDishImg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"titleDish\",children:product.product_name}),/*#__PURE__*/_jsxs(Box,{className:\"priceBox\",children:[/*#__PURE__*/_jsx(\"p\",{children:item.item_price}),/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:\"10px\"},children:\"*\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:\"10px\"},children:item.item_quantity}),/*#__PURE__*/_jsxs(\"p\",{style:{marginLeft:\"200px\",color:\"#000\"},children:[\"$\",item.item_price*item.item_quantity]})]})]});})}),/*#__PURE__*/_jsxs(Box,{className:\"total_price_box blue_solid\",children:[/*#__PURE__*/_jsxs(Box,{className:\"boxTotal\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:\"#144272\"},children:\"product price:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",order.order_total_amount-order.order_delivery_cost,\",\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#144272\"},children:\"delivery cost:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",order.order_delivery_cost,\", \"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#144272\"},children:\"total:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#000\",fontWeight:\"600\"},children:[\"$\",order.order_total_amount,\" \"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"data_compl\",children:moment(order.createdAt).format(\"YY-MM-DD HH:mm\")}),/*#__PURE__*/_jsx(Button,{value:order._id,onClick:finishOrderHandler,variant:\"contained\",style:{borderRadius:\"10px\"},children:\"Confirm payment\"})]})]});})})});}","map":{"version":3,"names":["React","TabPanel","Box","Button","Stack","useSelector","createSelector","retrieveProcessOrders","serverApi","moment","sweetErrorHandling","sweetFailureProvider","OrderApiService","verifiedMemberData","processOrdersRetriever","processOrders","dt","Date","ProcessOrders","props","finishOrderHandler","event","order_id","target","value","data","order_status","confirmation","window","confirm","orderService","updateOrderStatus","setOrderRebuild","console","log","then","map","order","order_items","item","product","product_data","filter","ele","_id","product_id","image_path","product_images","product_name","item_price","marginLeft","item_quantity","color","order_total_amount","order_delivery_cost","fontWeight","createdAt","format","borderRadius"],"sources":["/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/src/app/components/orders/processOrders.tsx"],"sourcesContent":["import React from \"react\";\nimport TabPanel from \"@material-ui/lab/TabPanel\";\nimport { Box, Button, Stack } from \"@mui/material\";\n//REDUX\nimport { useSelector } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { retrieveProcessOrders } from \"../../screens/OrdersPage/selector\";\nimport { Order } from \"../../../types/order\";\nimport { serverApi } from \"../../../lib/config\";\nimport { Product } from \"../../../types/product\";\nimport moment from \"moment\";\nimport {\n  sweetErrorHandling,\n  sweetFailureProvider,\n} from \"../../../lib/sweetAlert\";\nimport OrderApiService from \"../../apiServices/orderApiService\";\nimport { verifiedMemberData } from \"../../apiServices/verify\";\n\n/** REDUX SELECTOR */\nconst processOrdersRetriever = createSelector(\n  retrieveProcessOrders,\n  (processOrders) => ({\n    processOrders,\n  })\n);\n\nlet dt = new Date();\n\nexport default function ProcessOrders(props: any) {\n  // INITIALIZATIONS\n  const { processOrders } = useSelector(processOrdersRetriever);\n\n  //  HANDLERS\n  const finishOrderHandler = async (event: any) => {\n    try {\n      const order_id = event.target.value;\n      const data = { order_id: order_id, order_status: \"FINISHED\" };\n\n      if (!verifiedMemberData) {\n        sweetFailureProvider(\"Please Login first!\", true);\n      }\n\n      let confirmation = window.confirm(\n        \"Buyurtmani olganingizni tasdiqlaysizmi?\"\n      );\n      if (confirmation) {\n        const orderService = new OrderApiService();\n        await orderService.updateOrderStatus(data);\n        props.setOrderRebuild(new Date());\n      }\n    } catch (err) {\n      console.log(\"deleteOrderHandler, ERROR\", err);\n      sweetErrorHandling(err).then();\n    }\n  };\n  return (\n    <TabPanel value={\"2\"}>\n      <Stack>\n        {processOrders?.map((order: Order) => {\n          return (\n            <Box className={\"order_main_box\"}>\n              <Box className={\"order_box_scroll\"}>\n                {order.order_items.map((item) => {\n                  const product: Product = order.product_data.filter(\n                    (ele) => ele._id === item.product_id\n                  )[0];\n                  const image_path = `${serverApi}/${product.product_images[0]}`;\n                  return (\n                    <Box className={\"ordersName_price\"}>\n                      <img src={image_path} className={\"orderDishImg\"} />\n                      <p className={\"titleDish\"}>{product.product_name}</p>\n                      <Box className={\"priceBox\"}>\n                        <p>{item.item_price}</p>\n                        <p style={{ marginLeft: \"10px\" }}>*</p>\n                        <p style={{ marginLeft: \"10px\" }}>\n                          {item.item_quantity}\n                        </p>\n\n                        <p style={{ marginLeft: \"200px\", color: \"#000\" }}>\n                          ${item.item_price * item.item_quantity}\n                        </p>\n                      </Box>\n                    </Box>\n                  );\n                })}\n              </Box>\n\n              <Box className={\"total_price_box blue_solid\"}>\n                <Box className={\"boxTotal\"}>\n                  <p style={{ color: \"#144272\" }}>product price:</p>\n                  <p>\n                    ${order.order_total_amount - order.order_delivery_cost},\n                  </p>\n\n                  <p style={{ color: \"#144272\" }}>delivery cost:</p>\n                  <p>${order.order_delivery_cost}, </p>\n\n                  <p style={{ color: \"#144272\" }}>total:</p>\n                  <p style={{ color: \"#000\", fontWeight: \"600\" }}>\n                    ${order.order_total_amount}{\" \"}\n                  </p>\n                </Box>\n                <p className=\"data_compl\">\n                  {moment(order.createdAt).format(\"YY-MM-DD HH:mm\")}\n                </p>\n                <Button\n                  value={order._id}\n                  onClick={finishOrderHandler}\n                  variant=\"contained\"\n                  style={{ borderRadius: \"10px\" }}\n                >\n                  Confirm payment\n                </Button>\n              </Box>\n            </Box>\n          );\n        })}\n      </Stack>\n    </TabPanel>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}