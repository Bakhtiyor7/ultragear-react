{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{serverApi}from\"../../lib/config\";import assert from\"assert\";import axios from\"axios\";import{Definer}from\"../../lib/Definer\";var FollowApiService=/*#__PURE__*/function(){function FollowApiService(){_classCallCheck(this,FollowApiService);this.path=void 0;this.path=serverApi;}_createClass(FollowApiService,[{key:\"getMemberFollowers\",value:function(){var _getMemberFollowers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var _result$data,_result$data2,url,result,followers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=\"/follow/followers?page=\".concat(data.page,\"&limit=\").concat(data.limit,\"&mb_id=\").concat(data.mb_id);_context.next=4;return axios.get(this.path+url,{withCredentials:true});case 4:result=_context.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.message);console.log(\"state:\",result.data.state);followers=result.data.data;return _context.abrupt(\"return\",followers);case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(\"ERROR ::: getMemberFollowers \".concat(_context.t0.message));throw _context.t0;case 16:case\"end\":return _context.stop();}}},_callee,this,[[0,12]]);}));function getMemberFollowers(_x){return _getMemberFollowers.apply(this,arguments);}return getMemberFollowers;}()},{key:\"getMemberFollowings\",value:function(){var _getMemberFollowings=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var _result$data3,_result$data4,url,result,followings;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;url=\"/follow/followings?page=\".concat(data.page,\"&limit=\").concat(data.limit,\"&mb_id=\").concat(data.mb_id);_context2.next=4;return axios.get(this.path+url,{withCredentials:true});case 4:result=_context2.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.message);console.log(\"state:\",result.data.state);followings=result.data.data;return _context2.abrupt(\"return\",followings);case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.log(\"ERROR ::: getMemberFollowings \".concat(_context2.t0.message));throw _context2.t0;case 16:case\"end\":return _context2.stop();}}},_callee2,this,[[0,12]]);}));function getMemberFollowings(_x2){return _getMemberFollowings.apply(this,arguments);}return getMemberFollowings;}()},{key:\"subscribe\",value:function(){var _subscribe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(mb_id){var _result$data5,_result$data6,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(this.path+\"/follow/subscribe\",{mb_id:mb_id},{withCredentials:true});case 3:result=_context3.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data5=result.data)===null||_result$data5===void 0?void 0:_result$data5.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data6=result.data)===null||_result$data6===void 0?void 0:_result$data6.message);console.log(\"state:\",result.data.state);return _context3.abrupt(\"return\",result.data.data===\"subscribed\");case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(\"ERROR ::: subscribe \".concat(_context3.t0.message));throw _context3.t0;case 14:case\"end\":return _context3.stop();}}},_callee3,this,[[0,10]]);}));function subscribe(_x3){return _subscribe.apply(this,arguments);}return subscribe;}()},{key:\"unsubscribe\",value:function(){var _unsubscribe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(mb_id){var _result$data7,_result$data8,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post(this.path+\"/follow/unsubscribe\",{mb_id:mb_id},{withCredentials:true});case 3:result=_context4.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data7=result.data)===null||_result$data7===void 0?void 0:_result$data7.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data8=result.data)===null||_result$data8===void 0?void 0:_result$data8.message);console.log(\"state:\",result.data.state);return _context4.abrupt(\"return\",result.data.data===\"unsubscribed\");case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log(\"ERROR ::: unsubscribe \".concat(_context4.t0.message));throw _context4.t0;case 14:case\"end\":return _context4.stop();}}},_callee4,this,[[0,10]]);}));function unsubscribe(_x4){return _unsubscribe.apply(this,arguments);}return unsubscribe;}()}]);return FollowApiService;}();export default FollowApiService;","map":{"version":3,"names":["serverApi","assert","axios","Definer","FollowApiService","path","data","url","page","limit","mb_id","get","withCredentials","result","ok","general_err1","state","message","console","log","followers","followings","post"],"sources":["/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/src/app/apiServices/followApiService.ts"],"sourcesContent":["import { serverApi } from \"../../lib/config\";\nimport assert from \"assert\";\nimport axios from \"axios\";\nimport { Definer } from \"../../lib/Definer\";\nimport { Follower, Following, FollowSearchObj } from \"../../types/follow\";\n\nclass FollowApiService {\n  private readonly path: string;\n\n  constructor() {\n    this.path = serverApi;\n  }\n\n  public async getMemberFollowers(data: FollowSearchObj): Promise<Follower[]> {\n    try {\n      const url = `/follow/followers?page=${data.page}&limit=${data.limit}&mb_id=${data.mb_id}`;\n      const result = await axios.get(this.path + url, {\n        withCredentials: true,\n      });\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const followers: Follower[] = result.data.data;\n      return followers;\n    } catch (err: any) {\n      console.log(`ERROR ::: getMemberFollowers ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async getMemberFollowings(\n    data: FollowSearchObj\n  ): Promise<Following[]> {\n    try {\n      const url = `/follow/followings?page=${data.page}&limit=${data.limit}&mb_id=${data.mb_id}`;\n\n      const result = await axios.get(this.path + url, {\n        withCredentials: true,\n      });\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const followings: Following[] = result.data.data;\n      return followings;\n    } catch (err: any) {\n      console.log(`ERROR ::: getMemberFollowings ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async subscribe(mb_id: string): Promise<boolean> {\n    try {\n      const result = await axios.post(\n        this.path + \"/follow/subscribe\",\n        { mb_id: mb_id },\n        {\n          withCredentials: true,\n        }\n      );\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      return result.data.data === \"subscribed\";\n    } catch (err: any) {\n      console.log(`ERROR ::: subscribe ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async unsubscribe(mb_id: string): Promise<boolean> {\n    try {\n      const result = await axios.post(\n        this.path + \"/follow/unsubscribe\",\n        { mb_id: mb_id },\n        {\n          withCredentials: true,\n        }\n      );\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      return result.data.data === \"unsubscribed\";\n    } catch (err: any) {\n      console.log(`ERROR ::: unsubscribe ${err.message}`);\n      throw err;\n    }\n  }\n}\n\nexport default FollowApiService;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}