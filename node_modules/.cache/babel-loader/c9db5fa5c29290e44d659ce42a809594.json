{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import assert from\"assert\";import axios from\"axios\";import{serverApi}from\"../../lib/config\";import{Definer}from\"../../lib/Definer\";var CommunityApiService=/*#__PURE__*/function(){function CommunityApiService(){_classCallCheck(this,CommunityApiService);this.path=void 0;this.path=serverApi;}_createClass(CommunityApiService,[{key:\"uploadImageToServer\",value:function(){var _uploadImageToServer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(image){var _result$data,_result$data2,formData,result,image_name;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();formData.append(\"community_image\",image);console.log(image);_context.next=6;return axios(\"\".concat(this.path,\"/community/image\"),{method:\"POST\",data:formData,headers:{\"Content-Type\":\"multipart/form-data\"}});case 6:result=_context.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.message);console.log(\"state:\",result.data.state);image_name=result.data.data;return _context.abrupt(\"return\",image_name);case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(\"ERROR ::: uploadImageToServer \".concat(_context.t0.message));throw _context.t0;case 18:case\"end\":return _context.stop();}}},_callee,this,[[0,14]]);}));function uploadImageToServer(_x){return _uploadImageToServer.apply(this,arguments);}return uploadImageToServer;}()},{key:\"createArticle\",value:function(){var _createArticle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var _result$data3,_result$data4,result,article;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(this.path+\"/community/create\",data,{withCredentials:true});case 3:result=_context2.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.message);console.log(\"state:\",result.data.state);article=result.data.data;return _context2.abrupt(\"return\",article);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(\"ERROR ::: createArticle \".concat(_context2.t0.message));throw _context2.t0;case 15:case\"end\":return _context2.stop();}}},_callee2,this,[[0,11]]);}));function createArticle(_x2){return _createArticle.apply(this,arguments);}return createArticle;}()},{key:\"getTargetArticles\",value:function(){var _getTargetArticles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){var _result$data5,_result$data6,url,result,articles;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;url=\"/community/target?bo_id=\".concat(data.bo_id,\"&page=\").concat(data.page,\"&limit=\").concat(data.limit);if(data.order)url+=\"&order=\".concat(data.order);_context3.next=5;return axios.get(this.path+url,{withCredentials:true});case 5:result=_context3.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data5=result.data)===null||_result$data5===void 0?void 0:_result$data5.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data6=result.data)===null||_result$data6===void 0?void 0:_result$data6.message);console.log(\"state:\",result.data.state);articles=result.data.data;return _context3.abrupt(\"return\",articles);case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);console.log(\"ERROR ::: getTargetArticles \".concat(_context3.t0.message));throw _context3.t0;case 17:case\"end\":return _context3.stop();}}},_callee3,this,[[0,13]]);}));function getTargetArticles(_x3){return _getTargetArticles.apply(this,arguments);}return getTargetArticles;}()},{key:\"getMemberCommunityArticles\",value:function(){var _getMemberCommunityArticles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data){var _result$data7,_result$data8,url,result,articles;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;url=\"/community/articles?mb_id=\".concat(data.mb_id,\"&page=\").concat(data.page,\"&limit=\").concat(data.limit);_context4.next=4;return axios.get(this.path+url,{withCredentials:true});case 4:result=_context4.sent;console.log(\"data:::\",data);assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data7=result.data)===null||_result$data7===void 0?void 0:_result$data7.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data8=result.data)===null||_result$data8===void 0?void 0:_result$data8.message);console.log(\"state:\",result.data.state);articles=result.data.data;return _context4.abrupt(\"return\",articles);case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](0);console.log(\"ERROR ::: getMemberCommunityArticles \".concat(_context4.t0.message));throw _context4.t0;case 17:case\"end\":return _context4.stop();}}},_callee4,this,[[0,13]]);}));function getMemberCommunityArticles(_x4){return _getMemberCommunityArticles.apply(this,arguments);}return getMemberCommunityArticles;}()},{key:\"getChosenArticle\",value:function(){var _getChosenArticle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(art_id){var _result$data9,_result$data10,url,result,article;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;url=\"/community/single-article/\".concat(art_id);_context5.next=4;return axios.get(this.path+url,{withCredentials:true});case 4:result=_context5.sent;assert.ok(result===null||result===void 0?void 0:result.data,Definer.general_err1);assert.ok((result===null||result===void 0?void 0:(_result$data9=result.data)===null||_result$data9===void 0?void 0:_result$data9.state)!=\"fail\",result===null||result===void 0?void 0:(_result$data10=result.data)===null||_result$data10===void 0?void 0:_result$data10.message);console.log(\"state:\",result.data.state);article=result.data.data;return _context5.abrupt(\"return\",article);case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](0);console.log(\"ERROR ::: getChosenArticle \".concat(_context5.t0.message));throw _context5.t0;case 16:case\"end\":return _context5.stop();}}},_callee5,this,[[0,12]]);}));function getChosenArticle(_x5){return _getChosenArticle.apply(this,arguments);}return getChosenArticle;}()}]);return CommunityApiService;}();export default CommunityApiService;","map":{"version":3,"names":["assert","axios","serverApi","Definer","CommunityApiService","path","image","formData","FormData","append","console","log","method","data","headers","result","ok","general_err1","state","message","image_name","post","withCredentials","article","url","bo_id","page","limit","order","get","articles","mb_id","art_id"],"sources":["/Users/baxtiyoraxatov/Desktop/Desktop/ultragear-react/src/app/apiServices/communityApiService.ts"],"sourcesContent":["import assert from \"assert\";\nimport axios from \"axios\";\nimport { serverApi } from \"../../lib/config\";\nimport { Definer } from \"../../lib/Definer\";\nimport {\n  BoArticle,\n  BoArticleInput,\n  SearchArticlesObj,\n  SearchMemberArticlesObj,\n} from \"../../types/boArticle\";\n\nclass CommunityApiService {\n  private readonly path: string;\n\n  constructor() {\n    this.path = serverApi;\n  }\n\n  public async uploadImageToServer(image: any) {\n    try {\n      let formData = new FormData();\n      formData.append(\"community_image\", image);\n\n      console.log(image);\n      const result = await axios(`${this.path}/community/image`, {\n        method: \"POST\",\n        data: formData,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const image_name: string = result.data.data;\n      return image_name;\n    } catch (err: any) {\n      console.log(`ERROR ::: uploadImageToServer ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async createArticle(data: BoArticleInput) {\n    try {\n      const result = await axios.post(this.path + \"/community/create\", data, {\n        withCredentials: true,\n      });\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const article: BoArticle = result.data.data;\n      return article;\n    } catch (err: any) {\n      console.log(`ERROR ::: createArticle ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async getTargetArticles(data: SearchArticlesObj) {\n    try {\n      let url = `/community/target?bo_id=${data.bo_id}&page=${data.page}&limit=${data.limit}`;\n      if (data.order) url += `&order=${data.order}`;\n\n      const result = await axios.get(this.path + url, {\n        withCredentials: true,\n      });\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const articles: BoArticle[] = result.data.data;\n      return articles;\n    } catch (err: any) {\n      console.log(`ERROR ::: getTargetArticles ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async getMemberCommunityArticles(data: SearchMemberArticlesObj) {\n    try {\n      let url = `/community/articles?mb_id=${data.mb_id}&page=${data.page}&limit=${data.limit}`;\n      const result = await axios.get(this.path + url, {\n        withCredentials: true,\n      });\n      console.log(\"data:::\", data);\n\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const articles: BoArticle[] = result.data.data;\n      return articles;\n    } catch (err: any) {\n      console.log(`ERROR ::: getMemberCommunityArticles ${err.message}`);\n      throw err;\n    }\n  }\n\n  public async getChosenArticle(art_id: string) {\n    try {\n      let url = `/community/single-article/${art_id}`;\n      const result = await axios.get(this.path + url, {\n        withCredentials: true,\n      });\n\n      assert.ok(result?.data, Definer.general_err1);\n      assert.ok(result?.data?.state != \"fail\", result?.data?.message);\n      console.log(\"state:\", result.data.state);\n\n      const article: BoArticle = result.data.data;\n      return article;\n    } catch (err: any) {\n      console.log(`ERROR ::: getChosenArticle ${err.message}`);\n      throw err;\n    }\n  }\n}\n\nexport default CommunityApiService;\n"],"mappings":"0jBAAA,MAAOA,OAAM,KAAM,QAAQ,CAC3B,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,OAAO,KAAQ,mBAAmB,CAAC,GAQtCC,oBAAmB,yBAGvB,8BAAc,gDAFGC,IAAI,QAGnB,IAAI,CAACA,IAAI,CAAGH,SAAS,CACvB,CAAC,iKAED,iBAAiCI,KAAU,8LAEnCC,QAAQ,CAAG,GAAIC,SAAQ,EAAE,CAC7BD,QAAQ,CAACE,MAAM,CAAC,iBAAiB,CAAEH,KAAK,CAAC,CAEzCI,OAAO,CAACC,GAAG,CAACL,KAAK,CAAC,CAAC,sBACEL,MAAK,WAAI,IAAI,CAACI,IAAI,qBAAoB,CACzDO,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,QAAQ,CACdO,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,QANIC,MAAM,eAQZf,MAAM,CAACgB,EAAE,CAACD,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEF,IAAI,CAAEV,OAAO,CAACc,YAAY,CAAC,CAC7CjB,MAAM,CAACgB,EAAE,CAAC,CAAAD,MAAM,SAANA,MAAM,+BAANA,MAAM,CAAEF,IAAI,uCAAZ,aAAcK,KAAK,GAAI,MAAM,CAAEH,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcM,OAAO,CAAC,CAC/DT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEI,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,CAElCE,UAAkB,CAAGL,MAAM,CAACF,IAAI,CAACA,IAAI,iCACpCO,UAAU,4DAEjBV,OAAO,CAACC,GAAG,yCAAkC,YAAIQ,OAAO,EAAG,CAAC,uFAG/D,0OAED,kBAA2BN,IAAoB,+MAEtBZ,MAAK,CAACoB,IAAI,CAAC,IAAI,CAAChB,IAAI,CAAG,mBAAmB,CAAEQ,IAAI,CAAE,CACrES,eAAe,CAAE,IACnB,CAAC,CAAC,QAFIP,MAAM,gBAGZf,MAAM,CAACgB,EAAE,CAACD,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEF,IAAI,CAAEV,OAAO,CAACc,YAAY,CAAC,CAC7CjB,MAAM,CAACgB,EAAE,CAAC,CAAAD,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcK,KAAK,GAAI,MAAM,CAAEH,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcM,OAAO,CAAC,CAC/DT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEI,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,CAElCK,OAAkB,CAAGR,MAAM,CAACF,IAAI,CAACA,IAAI,kCACpCU,OAAO,+DAEdb,OAAO,CAACC,GAAG,mCAA4B,aAAIQ,OAAO,EAAG,CAAC,0FAGzD,iOAED,kBAA+BN,IAAuB,6LAE9CW,GAAG,mCAA8BX,IAAI,CAACY,KAAK,kBAASZ,IAAI,CAACa,IAAI,mBAAUb,IAAI,CAACc,KAAK,EACrF,GAAId,IAAI,CAACe,KAAK,CAAEJ,GAAG,mBAAcX,IAAI,CAACe,KAAK,CAAE,CAAC,uBAEzB3B,MAAK,CAAC4B,GAAG,CAAC,IAAI,CAACxB,IAAI,CAAGmB,GAAG,CAAE,CAC9CF,eAAe,CAAE,IACnB,CAAC,CAAC,QAFIP,MAAM,gBAGZf,MAAM,CAACgB,EAAE,CAACD,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEF,IAAI,CAAEV,OAAO,CAACc,YAAY,CAAC,CAC7CjB,MAAM,CAACgB,EAAE,CAAC,CAAAD,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcK,KAAK,GAAI,MAAM,CAAEH,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcM,OAAO,CAAC,CAC/DT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEI,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,CAElCY,QAAqB,CAAGf,MAAM,CAACF,IAAI,CAACA,IAAI,kCACvCiB,QAAQ,+DAEfpB,OAAO,CAACC,GAAG,uCAAgC,aAAIQ,OAAO,EAAG,CAAC,0FAG7D,+PAED,kBAAwCN,IAA6B,6LAE7DW,GAAG,qCAAgCX,IAAI,CAACkB,KAAK,kBAASlB,IAAI,CAACa,IAAI,mBAAUb,IAAI,CAACc,KAAK,yBAClE1B,MAAK,CAAC4B,GAAG,CAAC,IAAI,CAACxB,IAAI,CAAGmB,GAAG,CAAE,CAC9CF,eAAe,CAAE,IACnB,CAAC,CAAC,QAFIP,MAAM,gBAGZL,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEE,IAAI,CAAC,CAE5Bb,MAAM,CAACgB,EAAE,CAACD,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEF,IAAI,CAAEV,OAAO,CAACc,YAAY,CAAC,CAC7CjB,MAAM,CAACgB,EAAE,CAAC,CAAAD,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcK,KAAK,GAAI,MAAM,CAAEH,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcM,OAAO,CAAC,CAC/DT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEI,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,CAElCY,QAAqB,CAAGf,MAAM,CAACF,IAAI,CAACA,IAAI,kCACvCiB,QAAQ,+DAEfpB,OAAO,CAACC,GAAG,gDAAyC,aAAIQ,OAAO,EAAG,CAAC,0FAGtE,sQAED,kBAA8Ba,MAAc,6LAEpCR,GAAG,qCAAgCQ,MAAM,yBACxB/B,MAAK,CAAC4B,GAAG,CAAC,IAAI,CAACxB,IAAI,CAAGmB,GAAG,CAAE,CAC9CF,eAAe,CAAE,IACnB,CAAC,CAAC,QAFIP,MAAM,gBAIZf,MAAM,CAACgB,EAAE,CAACD,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEF,IAAI,CAAEV,OAAO,CAACc,YAAY,CAAC,CAC7CjB,MAAM,CAACgB,EAAE,CAAC,CAAAD,MAAM,SAANA,MAAM,gCAANA,MAAM,CAAEF,IAAI,wCAAZ,cAAcK,KAAK,GAAI,MAAM,CAAEH,MAAM,SAANA,MAAM,iCAANA,MAAM,CAAEF,IAAI,yCAAZ,eAAcM,OAAO,CAAC,CAC/DT,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEI,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,CAElCK,OAAkB,CAAGR,MAAM,CAACF,IAAI,CAACA,IAAI,kCACpCU,OAAO,+DAEdb,OAAO,CAACC,GAAG,sCAA+B,aAAIQ,OAAO,EAAG,CAAC,0FAG5D,gJAGH,cAAef,oBAAmB"},"metadata":{},"sourceType":"module"}